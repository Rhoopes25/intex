<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate - Ella Rises</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <%- include('partials/navbar') %>
    <img src="/butterfly.jpg" alt="" class="floating-clipart butterfly-1">
    <img src="/flower1.jpg" alt="" class="floating-clipart flower-top-right">
    <img src="/flower2.jpg" alt="" class="floating-clipart flower-hero-left">
    <img src="/flower3.jpg" alt="" class="floating-clipart flower-hero-right">
    <img src="/butterfly.jpg" alt="" class="floating-clipart butterfly-2">

    <div class="page-header">
        <div class="container">
            <h1><i class="fas fa-heart me-3"></i>Support Ella Rises</h1>
            <p>Your donation empowers young women to achieve their dreams</p>
        </div>
    </div>
    
    <div class="container mb-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <% if (needsLogin) { %>
                    <div class="card">
                        <div class="card-body text-center p-5">
                            <i class="fas fa-sign-in-alt" style="font-size: 4rem; color: var(--primary-blue); margin-bottom: 2rem;"></i>
                            <h3 class="mb-4">Please Login or Create an Account</h3>
                            <p class="mb-4">To make a donation, please login to your account or create a new one.</p>
                            <a href="/login?returnTo=/donate" class="btn btn-primary me-3">
                                <i class="fas fa-sign-in-alt me-2"></i>Login
                            </a>
                            <a href="/createProfile?returnTo=/donate" class="btn btn-outline-primary">
                                <i class="fas fa-user-plus me-2"></i>Create Account
                            </a>
                        </div>
                    </div>
                <% } else { %>
                    <div class="card">
                        <div class="card-header text-center">
                            <h3><i class="fas fa-donate me-2"></i>Make a Donation</h3>
                        </div>
                        <div class="card-body p-5">
                            <% if (error) { %>
                                <div class="alert alert-danger">
                                    <i class="fas fa-exclamation-circle me-2"></i><%= error %>
                                </div>
                            <% } %>
                            <% if (success) { %>
                                <div class="alert alert-success">
                                    <i class="fas fa-check-circle me-2"></i><%= success %>
                                </div>
                            <% } %>

                            <p class="text-center mb-4">
                                Your donation helps empower young women through education and mentorship in STEAM fields.
                            </p>
                            
                            <form method="POST" action="/donate">
                                <div class="mb-4">
                                    <label for="amount" class="form-label">Donation Amount ($)</label>
                                    <input type="number" class="form-control form-control-lg text-center" id="amount" name="amount" min="1" step="0.01" required placeholder="0.00">
                                </div>
                                
                                <div class="row g-2 mb-3">
                                    <div class="col-6">
                                        <button type="button" class="btn btn-outline-secondary w-100" onclick="document.getElementById('amount').value='25'">$25</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn btn-outline-secondary w-100" onclick="document.getElementById('amount').value='50'">$50</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn btn-outline-secondary w-100" onclick="document.getElementById('amount').value='100'">$100</button>
                                    </div>
                                    <div class="col-6">
                                        <button type="button" class="btn btn-outline-secondary w-100" onclick="document.getElementById('amount').value='250'">$250</button>
                                    </div>
                                </div>
                                
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    Your donation helps provide workshops, mentorship programs, and educational resources for young women in STEAM fields.
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100 btn-lg">
                                    <i class="fas fa-heart me-2"></i> Donate Now
                                </button>
                            </form>
                            
                            <div class="text-center mt-3">
                                <a href="/donations" class="text-muted">View All Donations</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mt-4">
                        <div class="card-body">
                            <h5><i class="fas fa-hand-holding-heart me-2"></i> Impact of Your Donation</h5>
                            <ul class="mb-0">
                                <li>$25 - Provides materials for one workshop</li>
                                <li>$50 - Sponsors one mentorship session</li>
                                <li>$100 - Supports a student's field trip</li>
                                <li>$250 - Funds a full workshop series</li>
                            </ul>
                        </div>
                    </div>
                    <!-- PERSONAL DONATIONS TABLE -->
                    <div class="card mt-5">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5><i class="fas fa-heart me-2"></i>Your Donations</h5>
                        </div>
                        <div class="card-body p-4">
                            <% if (!personalDonations || personalDonations.length === 0) { %>
                                <div class="text-center py-4">
                                    <i class="fas fa-heart" style="font-size: 3rem; color: var(--text-light);"></i>
                                    <p class="mt-3 mb-0">You haven't made any donations yet.</p>
                                </div>
                            <% } else { %>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Amount</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% personalDonations.forEach(d => { %>
                                                <tr>
                                                    <td><%= new Date(d.donationdate).toLocaleDateString() %></td>
                                                    <td>$<%= parseFloat(d.donationamount).toFixed(2) %></td>
                                                </tr>
                                            <% }) %>
                                        </tbody>
                                    </table>
                                </div>
                            <% } %>
                        </div>
                    </div>

                <% } %>
            </div>
        </div>
    </div>
    
    <%- include('partials/footer') %>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>